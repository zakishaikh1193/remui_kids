{{!
    Teacher Dashboard Template for remui_kids theme
    
    This template provides a teacher dashboard interface with course management,
    student tracking, and assignment monitoring capabilities.
}}

{{> theme_remui_kids/common_start}}

{{#teacher_dashboard}}
<!-- Full Screen Teacher Dashboard Wrapper -->
<div class="teacher-dashboard-wrapper">
    <!-- Mobile Sidebar Toggle Button -->
    <button class="sidebar-toggle" onclick="toggleTeacherSidebar()">
        <i class="fa fa-bars"></i>
    </button>

<!-- Teacher Dashboard Header -->


<!-- Teacher Sidebar Navigation -->
<div class="teacher-sidebar">
    <div class="sidebar-content">
        <!-- DASHBOARD Section -->
        <div class="sidebar-section">
            <h3 class="sidebar-category">DASHBOARD</h3>
            <ul class="sidebar-menu">
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/my/" class="sidebar-link">
                        <i class="fa fa-th-large sidebar-icon"></i>
                        <span class="sidebar-text">Teacher Dashboard</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/course/index.php" class="sidebar-link">
                        <i class="fa fa-book sidebar-icon"></i>
                        <span class="sidebar-text">My Courses</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/grade/report/grader/index.php" class="sidebar-link">
                        <i class="fa fa-graduation-cap sidebar-icon"></i>
                        <span class="sidebar-text">Gradebook</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/mod/assign/index.php" class="sidebar-link">
                        <i class="fa fa-tasks sidebar-icon"></i>
                        <span class="sidebar-text">Assignments</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- COURSES Section -->
        <div class="sidebar-section">
            <h3 class="sidebar-category">COURSES</h3>
            <ul class="sidebar-menu">
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/course/index.php" class="sidebar-link">
                        <i class="fa fa-book sidebar-icon"></i>
                        <span class="sidebar-text">All Courses</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/course/edit.php" class="sidebar-link">
                        <i class="fa fa-plus sidebar-icon"></i>
                        <span class="sidebar-text">Create Course</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/course/index.php?categoryid=0" class="sidebar-link">
                        <i class="fa fa-folder sidebar-icon"></i>
                        <span class="sidebar-text">Course Categories</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- STUDENTS Section -->
        <div class="sidebar-section">
            <h3 class="sidebar-category">STUDENTS</h3>
            <ul class="sidebar-menu">
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/user/index.php" class="sidebar-link">
                        <i class="fa fa-users sidebar-icon"></i>
                        <span class="sidebar-text">All Students</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/enrol/users.php" class="sidebar-link">
                        <i class="fa fa-user-plus sidebar-icon"></i>
                        <span class="sidebar-text">Enroll Students</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/report/progress/index.php" class="sidebar-link">
                        <i class="fa fa-chart-line sidebar-icon"></i>
                        <span class="sidebar-text">Progress Reports</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- ASSESSMENTS Section -->
        <div class="sidebar-section">
            <h3 class="sidebar-category">ASSESSMENTS</h3>
            <ul class="sidebar-menu">
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/mod/assign/index.php" class="sidebar-link">
                        <i class="fa fa-tasks sidebar-icon"></i>
                        <span class="sidebar-text">Assignments</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/mod/quiz/index.php" class="sidebar-link">
                        <i class="fa fa-question-circle sidebar-icon"></i>
                        <span class="sidebar-text">Quizzes</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/grade/report/grader/index.php" class="sidebar-link">
                        <i class="fa fa-star sidebar-icon"></i>
                        <span class="sidebar-text">Grading</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- REPORTS Section -->
        <div class="sidebar-section">
            <h3 class="sidebar-category">REPORTS</h3>
            <ul class="sidebar-menu">
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/report/log/index.php" class="sidebar-link">
                        <i class="fa fa-chart-bar sidebar-icon"></i>
                        <span class="sidebar-text">Activity Logs</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/report/outline/index.php" class="sidebar-link">
                        <i class="fa fa-file-alt sidebar-icon"></i>
                        <span class="sidebar-text">Course Reports</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{{config.wwwroot}}/report/progress/index.php" class="sidebar-link">
                        <i class="fa fa-chart-line sidebar-icon"></i>
                        <span class="sidebar-text">Progress Tracking</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>

<!-- Main Content Area with Sidebar -->
<div class="teacher-main-content">

<!-- Teacher Dashboard Statistics -->
<div class="teacher-dashboard-stats">
    <div class="stats-section-container">
        <div class="section-header">
            <h3 class="section-title">Dashboard</h3>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="teacher-stats-container">
                    {{#teacher_stats}}
                    <!-- Total Courses Card -->
                    <div class="teacher-stat-card courses-card" id="courses-card">
                        <div class="stat-icon-container">
                            <i class="fa fa-book stat-icon"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="total-courses-count">{{total_courses}}</div>
                            <div class="stat-label">TOTAL COURSES</div>
                            <div class="stat-change positive">
                                <i class="fa fa-arrow-up"></i> +1.34%
                            </div>
                        </div>
                        <div class="stat-refresh-btn" onclick="refreshCourseCount()" style="position: absolute; top: 10px; right: 10px; cursor: pointer;">
                            <i class="fa fa-refresh" id="courses-refresh-icon"></i>
                        </div>
                    </div>
                    
                    <!-- Total Students Card -->
                    <div class="teacher-stat-card students-card" id="students-card">
                        <div class="stat-icon-container">
                            <i class="fa fa-users stat-icon"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="total-students-count">{{total_students}}</div>
                            <div class="stat-label">TOTAL STUDENTS</div>
                            <div class="stat-change negative">
                                <i class="fa fa-arrow-down"></i> -1.34%
                            </div>
                        </div>
                        <div class="stat-refresh-btn" onclick="refreshStudentCount()" style="position: absolute; top: 10px; right: 10px; cursor: pointer;">
                            <i class="fa fa-refresh" id="students-refresh-icon"></i>
                        </div>
                    </div>
                    
                    <!-- Assignments Card -->
                    <div class="teacher-stat-card assignments-card" id="assignments-card">
                        <div class="stat-icon-container">
                            <i class="fa fa-tasks stat-icon"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="pending-assignments-count">{{pending_assignments}}</div>
                            <div class="stat-label">TOTAL ASSIGNMENTS</div>
                            <div class="stat-change positive">
                                <i class="fa fa-arrow-up"></i> +5.67%
                            </div>
                        </div>
                        <div class="stat-refresh-btn" onclick="refreshAssignmentCount()" style="position: absolute; top: 10px; right: 10px; cursor: pointer;">
                            <i class="fa fa-refresh" id="assignments-refresh-icon"></i>
                        </div>
                    </div>
                    
                    <!-- Upcoming Classes Card -->
                    <div class="teacher-stat-card classes-card" id="classes-card">
                        <div class="stat-icon-container">
                            <i class="fa fa-calendar stat-icon"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="upcoming-classes-count">{{upcoming_classes}}</div>
                            <div class="stat-label">UPCOMING CLASSES</div>
                            <div class="stat-change positive">
                                <i class="fa fa-arrow-up"></i> +2.45%
                            </div>
                        </div>
                        <div class="stat-refresh-btn" onclick="refreshClassCount()" style="position: absolute; top: 10px; right: 10px; cursor: pointer;">
                            <i class="fa fa-refresh" id="classes-refresh-icon"></i>
                        </div>
                    </div>
                    <!-- Total Quizzes -->
                    <div class="teacher-stat-card classes-card" id="classes-card">
                        <div class="stat-icon-container">
                            <i class="fa fa-calendar stat-icon"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="upcoming-classes-count">{{upcoming_classes}}</div>
                            <div class="stat-label">Total Quizzes</div>
                            <div class="stat-change positive">
                                <i class="fa fa-arrow-up"></i> +2.45%
                            </div>
                        </div>
                        <div class="stat-refresh-btn" onclick="refreshClassCount()" style="position: absolute; top: 10px; right: 10px; cursor: pointer;">
                            <i class="fa fa-refresh" id="classes-refresh-icon"></i>
                        </div>
                    </div>
                    {{/teacher_stats}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Charts and Analytics Section -->
<div class="row mt-4">
    <div class="col-md-8">
        <div class="dashboard-card">
            <div class="card-header">
                <h5 class="card-title">Student Performance by Course</h5>
                <div class="card-actions">
                    <button class="btn btn-sm btn-outline-secondary">
                        <i class="fa fa-ellipsis-h"></i>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <canvas id="performanceChart" height="100"></canvas>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="dashboard-card">
            <div class="card-header">
                <h5 class="card-title">Course Completion Rate</h5>
                <div class="card-actions">
                    <button class="btn btn-sm btn-outline-secondary">
                        <i class="fa fa-ellipsis-h"></i>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <canvas id="completionChart" height="200"></canvas>
            </div>
        </div>
    </div>
</div>

<!-- Top Sections Row -->
<div class="row mt-4">
    <!-- Teaching Progress Section -->
    <div class="col-md-4">
        <div class="dashboard-card">
            <div class="card-header">
                <h5 class="card-title">Teaching Progress</h5>
            </div>
            <div class="card-body">
                <div class="progress-container">
                    <div class="progress-info">
                        <span class="progress-label">Monthly Goal</span>
                        <span class="progress-value">68%</span>
                    </div>
                    <div class="progress">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 68%" aria-valuenow="68" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <div class="progress-detail mt-2">
                        <small>68% of monthly teaching goal achieved</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Top Students Section -->
    <div class="col-md-4">
        <div class="dashboard-card">
            <div class="card-header">
                <h5 class="card-title">Top Students</h5>
            </div>
            <div class="card-body">
                <div class="top-students-list">
                    {{#top_students}}
                    <div class="student-item">
                        <div class="student-avatar">
                            <img src="{{avatar_url}}" alt="{{name}}">
                        </div>
                        <div class="student-info">
                            <div class="student-name">{{name}}</div>
                            <div class="student-score">{{score}} points</div>
                        </div>
                    </div>
                    {{/top_students}}
                    {{^top_students}}
                    <div class="no-data-message">
                        <p>No student data available</p>
                    </div>
                    {{/top_students}}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Top Courses Section -->
    <div class="col-md-4">
        <div class="dashboard-card">
            <div class="card-header">
                <h5 class="card-title">Top Courses by Enrollment</h5>
            </div>
            <div class="card-body">
                <div class="top-courses-list">
                    {{#top_courses}}
                    <div class="course-item">
                        <div class="course-icon">
                            <i class="fa fa-book"></i>
                        </div>
                        <div class="course-info">
                            <div class="course-name">{{name}}</div>
                            <div class="course-enrollment">{{enrollment_count}} students</div>
                        </div>
                    </div>
                    {{/top_courses}}
                    {{^top_courses}}
                    <div class="no-data-message">
                        <p>No course data available</p>
                    </div>
                    {{/top_courses}}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Courses and Students Section -->
<div class="row mt-4">
    <div class="col-md-6">
        <div class="dashboard-card">
            <div class="card-header">
                <h5 class="card-title">Recent Courses</h5>
                <a href="{{config.wwwroot}}/course/index.php" class="btn btn-sm btn-primary">View All</a>
            </div>
            <div class="card-body">
                <div class="courses-list">
                    {{#teacher_courses}}
                    <div class="course-item">
                        <div class="course-info">
                            <div class="course-icon">
                                <i class="fa fa-book"></i>
                            </div>
                            <div class="course-details">
                                <div class="course-name">{{fullname}}</div>
                                <div class="course-shortname">{{shortname}}</div>
                                <div class="course-meta">
                                    <span class="course-students">{{student_count}} students</span>
                                    <span class="course-updated">Updated {{last_modified}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="course-actions">
                            <a href="{{url}}" class="btn btn-primary btn-sm">View Course</a>
                        </div>
                    </div>
                    {{/teacher_courses}}
                    
                    {{^teacher_courses}}
                    <div class="no-courses-message">
                        <i class="fa fa-book"></i>
                        <p>No courses found. Create your first course to get started!</p>
                        <a href="{{config.wwwroot}}/course/edit.php" class="btn btn-primary">Create Course</a>
                    </div>
                    {{/teacher_courses}}
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="dashboard-card">
            <div class="card-header">
                <h5 class="card-title">Recent Students</h5>
                <a href="{{config.wwwroot}}/user/index.php" class="btn btn-sm btn-primary">View All</a>
            </div>
            <div class="card-body">
                <div class="students-list">
                    {{#teacher_students}}
                    <div class="student-item">
                        <div class="student-info">
                            <div class="student-icon">
                                <i class="fa fa-user"></i>
                            </div>
                            <div class="student-details">
                                <div class="student-name">{{name}}</div>
                                <div class="student-email">{{email}}</div>
                                <div class="student-meta">
                                    <span class="student-courses">{{course_count}} courses</span>
                                    <span class="student-last-access">Last seen {{last_access}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="student-actions">
                            <a href="{{profile_url}}" class="btn btn-outline-primary btn-sm">View Profile</a>
                        </div>
                    </div>
                    {{/teacher_students}}
                    
                    {{^teacher_students}}
                    <div class="no-students-message">
                        <i class="fa fa-users"></i>
                        <p>No students found. Enroll students in your courses to see them here.</p>
                    </div>
                    {{/teacher_students}}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Assignments Section -->
<div class="row mt-4">
    <div class="col-md-12">
        <div class="dashboard-card">
            <div class="card-header">
                <h5 class="card-title">Recent Assignments</h5>
                <a href="{{config.wwwroot}}/mod/assign/index.php" class="btn btn-sm btn-primary">View All</a>
            </div>
            <div class="card-body">
                <div class="assignments-list">
                    {{#teacher_assignments}}
                    <div class="assignment-item">
                        <div class="assignment-info">
                            <div class="assignment-icon">
                                <i class="fa fa-tasks"></i>
                            </div>
                            <div class="assignment-details">
                                <div class="assignment-name">{{name}}</div>
                                <div class="assignment-course">{{course_name}}</div>
                                <div class="assignment-meta">
                                    <span class="assignment-due">Due {{due_date}}</span>
                                    <span class="assignment-submissions">{{submission_count}} submissions</span>
                                    <span class="assignment-graded">{{graded_count}} graded</span>
                                </div>
                            </div>
                        </div>
                        <div class="assignment-status">
                            <span class="status-badge status-{{status}}">{{status}}</span>
                            <a href="{{url}}" class="btn btn-primary btn-sm">Grade</a>
                        </div>
                    </div>
                    {{/teacher_assignments}}
                    
                    {{^teacher_assignments}}
                    <div class="no-assignments-message">
                        <i class="fa fa-tasks"></i>
                        <p>No assignments found. Create assignments in your courses to see them here.</p>
                    </div>
                    {{/teacher_assignments}}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Student Feedback Section -->
<div class="row mt-4">
    <div class="col-md-6">
        <div class="dashboard-card">
            <div class="card-header">
                <h5 class="card-title">Student Feedback</h5>
            </div>
            <div class="card-body">
                <div class="feedback-overview">
                    <div class="rating-summary">
                        <div class="rating-number">4.5</div>
                        <div class="rating-stars">
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star-half-alt"></i>
                        </div>
                        <div class="rating-count">Based on 128 reviews</div>
                    </div>
                    <div class="rating-breakdown">
                        <div class="rating-bar">
                            <span class="rating-label">5 stars</span>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 65%" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <span class="rating-percentage">65%</span>
                        </div>
                        <div class="rating-bar">
                            <span class="rating-label">4 stars</span>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <span class="rating-percentage">20%</span>
                        </div>
                        <div class="rating-bar">
                            <span class="rating-label">3 stars</span>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <span class="rating-percentage">10%</span>
                        </div>
                        <div class="rating-bar">
                            <span class="rating-label">2 stars</span>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 3%" aria-valuenow="3" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <span class="rating-percentage">3%</span>
                        </div>
                        <div class="rating-bar">
                            <span class="rating-label">1 star</span>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 2%" aria-valuenow="2" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <span class="rating-percentage">2%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="dashboard-card">
            <div class="card-header">
                <h5 class="card-title">Recent Feedback</h5>
            </div>
            <div class="card-body">
                <div class="feedback-list">
                    {{#recent_feedback}}
                    <div class="feedback-item">
                        <div class="feedback-header">
                            <div class="student-name">{{student_name}}</div>
                            <div class="feedback-date">{{date}}</div>
                        </div>
                        <div class="feedback-rating">
                            {{#stars}}<i class="fa fa-star"></i>{{/stars}}
                            {{#empty_stars}}<i class="far fa-star"></i>{{/empty_stars}}
                        </div>
                        <div class="feedback-comment">{{comment}}</div>
                    </div>
                    {{/recent_feedback}}
                    {{^recent_feedback}}
                    <div class="no-feedback-message">
                        <p>No feedback available yet.</p>
                    </div>
                    {{/recent_feedback}}
                </div>
            </div>
        </div>
    </div>
</div>

</div> <!-- End teacher-main-content -->

{{/teacher_dashboard}}

<!-- Regular Dashboard Content (fallback) -->
<div class="dashboard-content">
    <div id="region-main-box" class="d-print-block">
        <section id="region-main" class="d-print-block" aria-label="{{#str}}content{{/str}}">
            <div class="rui-course-content">
                {{{ output.main_content }}}
            </div>
        </section>
    </div>
</div>

{{> theme_remui/common_end}}

<style>
/* Dashboard Card Styles */
.dashboard-card {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    margin-bottom: 20px;
    border: none;
}

.dashboard-card .card-header {
    background-color: transparent;
    border-bottom: 1px solid #f0f0f0;
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.dashboard-card .card-title {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: #333;
}

.dashboard-card .card-body {
    padding: 20px;
}

/* Stat Card Styles */
.teacher-stat-card {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    padding: 20px;
    margin-bottom: 20px;
    position: relative;
    transition: transform 0.3s, box-shadow 0.3s;
}

.teacher-stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.stat-icon-container {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 15px;
}

.courses-card .stat-icon-container {
    background-color: rgba(54, 162, 235, 0.1);
    color: #36a2eb;
}

.students-card .stat-icon-container {
    background-color: rgba(255, 99, 132, 0.1);
    color: #ff6384;
}

.assignments-card .stat-icon-container {
    background-color: rgba(255, 206, 86, 0.1);
    color: #ffce56;
}

.classes-card .stat-icon-container {
    background-color: rgba(75, 192, 192, 0.1);
    color: #4bc0c0;
}

.stat-number {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 5px;
}

.stat-label {
    font-size: 14px;
    color: #666;
    margin-bottom: 10px;
}

.stat-change {
    font-size: 12px;
    font-weight: 600;
}

.stat-change.positive {
    color: #28a745;
}

.stat-change.negative {
    color: #dc3545;
}

/* Progress Styles */
.progress-container {
    margin-bottom: 15px;
}

.progress-info {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
}

.progress-label {
    font-weight: 600;
}

.progress-value {
    font-weight: 700;
}

.progress {
    height: 10px;
    background-color: #f0f0f0;
    border-radius: 5px;
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    border-radius: 5px;
}

/* Top Lists Styles */
.top-students-list, .top-courses-list {
    margin-top: 10px;
}

.student-item, .course-item {
    display: flex;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid #f0f0f0;
}

.student-item:last-child, .course-item:last-child {
    border-bottom: none;
}

.student-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    overflow: hidden;
    margin-right: 15px;
}

.student-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.course-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #f0f0f0;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    color: #666;
}

.student-info, .course-info {
    flex: 1;
}

.student-name, .course-name {
    font-weight: 600;
    margin-bottom: 3px;
}

.student-score, .course-enrollment {
    font-size: 14px;
    color: #666;
}

/* Feedback Styles */
.feedback-overview {
    display: flex;
    flex-direction: column;
}

.rating-summary {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 20px;
}

.rating-number {
    font-size: 48px;
    font-weight: 700;
    line-height: 1;
    margin-bottom: 5px;
}

.rating-stars {
    color: #ffc107;
    margin-bottom: 5px;
}

.rating-count {
    font-size: 14px;
    color: #666;
}

.rating-breakdown {
    margin-top: 15px;
}

.rating-bar {
    display: flex;
    align-items: center;
    margin-bottom: 8px;
}

.rating-label {
    width: 60px;
    font-size: 14px;
}

.rating-bar .progress {
    flex: 1;
    height: 8px;
    margin: 0 10px;
    background-color: #f0f0f0;
}

.rating-bar .progress-bar {
    background-color: #ffc107;
}

.rating-percentage {
    width: 40px;
    text-align: right;
    font-size: 14px;
}

.feedback-list {
    max-height: 300px;
    overflow-y: auto;
}

.feedback-item {
    padding: 15px 0;
    border-bottom: 1px solid #f0f0f0;
}

.feedback-item:last-child {
    border-bottom: none;
}

.feedback-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
}

.student-name {
    font-weight: 600;
}

.feedback-date {
    font-size: 14px;
    color: #666;
}

.feedback-rating {
    color: #ffc107;
    margin-bottom: 5px;
}

.feedback-comment {
    font-size: 14px;
    color: #333;
}

/* No Data Message Styles */
.no-data-message, .no-courses-message, .no-students-message, .no-assignments-message, .no-feedback-message {
    text-align: center;
    padding: 20px;
    color: #666;
}

.no-data-message i, .no-courses-message i, .no-students-message i, .no-assignments-message i, .no-feedback-message i {
    font-size: 48px;
    margin-bottom: 15px;
    color: #ddd;
}

/* Responsive Styles */
@media (max-width: 768px) {
    .teacher-stats-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
    }
    
    .teacher-stat-card {
        width: 48%;
        margin-bottom: 15px;
    }
    
    .feedback-overview {
        flex-direction: column;
    }
    
    .rating-summary {
        margin-bottom: 20px;
    }
}
</style>

<script>
function toggleTeacherSidebar() {
    const sidebar = document.querySelector('.teacher-sidebar');
    sidebar.classList.toggle('sidebar-open');
}

// Close sidebar when clicking outside on mobile
document.addEventListener('click', function(event) {
    const sidebar = document.querySelector('.teacher-sidebar');
    const toggleButton = document.querySelector('.sidebar-toggle');
    
    if (window.innerWidth <= 768) {
        if (!sidebar.contains(event.target) && !toggleButton.contains(event.target)) {
            sidebar.classList.remove('sidebar-open');
        }
    }
});

// Handle window resize
window.addEventListener('resize', function() {
    const sidebar = document.querySelector('.teacher-sidebar');
    if (window.innerWidth > 768) {
        sidebar.classList.remove('sidebar-open');
    }
});

// Highlight active sidebar menu item based on current URL
document.addEventListener('DOMContentLoaded', function() {
    const currentUrl = window.location.href;
    const currentPath = window.location.pathname;
    const sidebarItems = document.querySelectorAll('.sidebar-item');
    
    // Remove all active classes first
    sidebarItems.forEach(item => {
        item.classList.remove('active');
    });
    
    // Find and highlight the matching menu item
    sidebarItems.forEach(item => {
        const link = item.querySelector('.sidebar-link');
        if (link) {
            const href = link.getAttribute('href');
            
            // Skip empty or hash-only links
            if (!href || href === '#') {
                return;
            }
            
            // Check if current URL matches this link
            if (currentUrl === href || currentUrl.includes(href)) {
                item.classList.add('active');
            } else {
                // Try matching just the filename
                const linkPath = href.split('/').pop().split('?')[0];
                const currentFile = currentPath.split('/').pop().split('?')[0];
                
                if (linkPath && currentFile && linkPath === currentFile) {
                    item.classList.add('active');
                }
            }
        }
    });
    
    // If no item is active and we're on /my/ page, activate Teacher Dashboard
    const hasActive = document.querySelector('.sidebar-item.active');
    if (!hasActive && (currentPath.includes('/my/') || currentPath.endsWith('/my'))) {
        const dashboardItem = document.querySelector('.sidebar-item a[href*="/my/"]');
        if (dashboardItem) {
            dashboardItem.closest('.sidebar-item').classList.add('active');
        }
    }
    
    // Initialize Charts
    initializeCharts();
});

// Real-time statistics update functions
function refreshCourseCount() {
    const refreshIcon = document.getElementById('courses-refresh-icon');
    const coursesCount = document.getElementById('total-courses-count');
    
    // Show loading state
    refreshIcon.classList.add('fa-spin');
    
    // Simulate API call (replace with actual API endpoint)
    setTimeout(() => {
        // Update the count (this would come from API)
        const currentValue = parseInt(coursesCount.textContent) || 0;
        coursesCount.textContent = currentValue;
        
        // Remove loading state
        refreshIcon.classList.remove('fa-spin');
        
        // Show success feedback
        showUpdateFeedback('courses-card', 'success');
    }, 1000);
}

function refreshStudentCount() {
    const refreshIcon = document.getElementById('students-refresh-icon');
    const studentsCount = document.getElementById('total-students-count');
    
    // Show loading state
    refreshIcon.classList.add('fa-spin');
    
    // Simulate API call
    setTimeout(() => {
        const currentValue = parseInt(studentsCount.textContent) || 0;
        studentsCount.textContent = currentValue;
        
        refreshIcon.classList.remove('fa-spin');
        showUpdateFeedback('students-card', 'success');
    }, 1000);
}

function refreshAssignmentCount() {
    const refreshIcon = document.getElementById('assignments-refresh-icon');
    const assignmentsCount = document.getElementById('pending-assignments-count');
    
    // Show loading state
    refreshIcon.classList.add('fa-spin');
    
    // Simulate API call
    setTimeout(() => {
        const currentValue = parseInt(assignmentsCount.textContent) || 0;
        assignmentsCount.textContent = currentValue;
        
        refreshIcon.classList.remove('fa-spin');
        showUpdateFeedback('assignments-card', 'success');
    }, 1000);
}

function refreshClassCount() {
    const refreshIcon = document.getElementById('classes-refresh-icon');
    const classesCount = document.getElementById('upcoming-classes-count');
    
    // Show loading state
    refreshIcon.classList.add('fa-spin');
    
    // Simulate API call
    setTimeout(() => {
        const currentValue = parseInt(classesCount.textContent) || 0;
        classesCount.textContent = currentValue;
        
        refreshIcon.classList.remove('fa-spin');
        showUpdateFeedback('classes-card', 'success');
    }, 1000);
}

function showUpdateFeedback(cardId, type) {
    const card = document.getElementById(cardId);
    const feedback = document.createElement('div');
    feedback.className = `update-feedback ${type}`;
    feedback.textContent = type === 'success' ? '✓ Updated' : '✗ Error';
    feedback.style.cssText = `
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: ${type === 'success' ? '#4CAF50' : '#f44336'};
        color: white;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 12px;
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.3s;
    `;
    
    card.style.position = 'relative';
    card.appendChild(feedback);
    
    // Fade in
    setTimeout(() => feedback.style.opacity = '1', 10);
    
    // Fade out and remove
    setTimeout(() => {
        feedback.style.opacity = '0';
        setTimeout(() => card.removeChild(feedback), 300);
    }, 2000);
}

// Initialize Charts
function initializeCharts() {
    // Performance Chart
    const performanceCtx = document.getElementById('performanceChart');
    if (performanceCtx) {
        // Try to use server-provided data
        let perfData = null;
        try {
            perfData = {{#performanceChart}}{{{performanceChart}}}{{/performanceChart}}{{^performanceChart}}null{{/performanceChart}};
        } catch (e) {
            perfData = null;
        }

        const labels = perfData && perfData.labels ? perfData.labels : ['Math', 'Science', 'History', 'English', 'Art', 'Music'];
        const dataset = perfData && perfData.data ? perfData.data : [85, 78, 92, 88, 76, 82];

        new Chart(performanceCtx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Average Score',
                    data: dataset,
                    backgroundColor: 'rgba(54, 162, 235, 0.5)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100
                    }
                }
            }
        });
    }
    
    // Completion Chart
    const completionCtx = document.getElementById('completionChart');
    if (completionCtx) {
        // Try to use server-provided completion summary
        let compSummary = null;
        try {
            compSummary = {{#completionSummary}}{{{completionSummary}}}{{/completionSummary}}{{^completionSummary}}null{{/completionSummary}};
        } catch (e) {
            compSummary = null;
        }

        const labels = ['Completed', 'In Progress', 'Not Started'];
        const data = compSummary ? [compSummary.completed || 0, compSummary.inprogress || 0, compSummary.not_started || 0] : [65, 25, 10];

        new Chart(completionCtx, {
            type: 'doughnut',
            data: {
                labels: labels,
                datasets: [{
                    data: data,
                    backgroundColor: [
                        'rgba(75, 192, 192, 0.5)',
                        'rgba(255, 206, 86, 0.5)',
                        'rgba(255, 99, 132, 0.5)'
                    ],
                    borderColor: [
                        'rgba(75, 192, 192, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(255, 99, 132, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });
    }
}

// Auto-refresh every 30 seconds
setInterval(refreshCourseCount, 30000);
setInterval(refreshStudentCount, 30000);
setInterval(refreshAssignmentCount, 30000);
setInterval(refreshClassCount, 30000);
</script>
</div> <!-- End teacher-dashboard-wrapper -->