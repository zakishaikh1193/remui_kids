<?xml version="1.0" encoding="UTF-8" ?>
<XMLDB PATH="theme/remui_kids/db" VERSION="20240101" COMMENT="XMLDB file for Moodle theme/remui_kids"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../../../lib/xmldb/xmldb.xsd"
>
  <TABLES>
    <TABLE NAME="theme_remui_kids_student_questions" COMMENT="Student questions submitted through the Questions Management system">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="student_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="course_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="forum_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="discussion_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="grade" TYPE="char" LENGTH="20" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="subject" TYPE="char" LENGTH="50" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="question_text" TYPE="text" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="status" TYPE="char" LENGTH="20" NOTNULL="true" SEQUENCE="false" DEFAULT="pending"/>
        <FIELD NAME="answered_by" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false"/>
        <FIELD NAME="answered_at" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false"/>
        <FIELD NAME="created_at" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="student" TYPE="foreign" FIELDS="student_id" REFTABLE="user" REFFIELDS="id"/>
        <KEY NAME="course" TYPE="foreign" FIELDS="course_id" REFTABLE="course" REFFIELDS="id"/>
        <KEY NAME="forum" TYPE="foreign" FIELDS="forum_id" REFTABLE="forum" REFFIELDS="id"/>
        <KEY NAME="discussion" TYPE="foreign" FIELDS="discussion_id" REFTABLE="forum_discussions" REFFIELDS="id"/>
        <KEY NAME="teacher" TYPE="foreign" FIELDS="answered_by" REFTABLE="user" REFFIELDS="id"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="status" UNIQUE="false" FIELDS="status"/>
        <INDEX NAME="grade_subject" UNIQUE="false" FIELDS="grade,subject"/>
        <INDEX NAME="created_at" UNIQUE="false" FIELDS="created_at"/>
      </INDEXES>
    </TABLE>
    
    <TABLE NAME="theme_remui_kids_question_answers" COMMENT="Answers provided by teachers to student questions">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="question_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="teacher_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="answer_text" TYPE="text" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="post_id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="created_at" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="question" TYPE="foreign" FIELDS="question_id" REFTABLE="theme_remui_kids_student_questions" REFFIELDS="id"/>
        <KEY NAME="teacher" TYPE="foreign" FIELDS="teacher_id" REFTABLE="user" REFFIELDS="id"/>
        <KEY NAME="post" TYPE="foreign" FIELDS="post_id" REFTABLE="forum_posts" REFFIELDS="id"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="question_teacher" UNIQUE="false" FIELDS="question_id,teacher_id"/>
        <INDEX NAME="created_at" UNIQUE="false" FIELDS="created_at"/>
      </INDEXES>
    </TABLE>
  </TABLES>
</XMLDB>
